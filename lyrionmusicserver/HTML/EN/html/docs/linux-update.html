[% extension = installerFile.match('\.(rpm|deb|tcz)$');
IF extension;
	distro = extension.0;
END;
%]

[% IF distro == 'tcz' %]

<p>On piCorePlayer we provide a script to download and update Lyrion Music Server.
	This script will update your local copy of LMS to the latest build.<p>

	<button onclick="window.location.href='http://' + window.location.hostname + ':80/cgi-bin/writetolms.cgi?ACTION=Update';">
		Update &amp; restart Lyrion Music Server
	</button>

<p>...or use
	<script language="JavaScript">
	document.write('<a href="' + window.location.protocol + '//' + window.location.hostname + ':80' + '/cgi-bin/lms-update.cgi?ACTION=Nightly' + '" >this Link</a> ' );
	</script> to update LMS using the piCorePlayer interface.</p>

[% ELSE %]

<p>On some Linux distributions we provide an automatic download of Lyrion Music Server update installers.
These currently are available for .rpm and .deb based systems.<p>

[% IF distro == 'deb' %]
<p>Your Lyrion Music Server has downloaded the latest installer to the following location:</p>

<pre>[% installerFile %]</pre>
[% END %]

<p>Please execute the following steps to bring your Lyrion Music Server installation up to date:</p>

<ul style="direction: ltr;">
	<li>Log in to your server machine using your username and password.</li>
	<li>Run the following command to execute the installer:</li>
	<li><code>sudo [% distro == 'rpm' ? 'rpm -Uvh' : 'apt install' %] [% installerFile %]</code></li>
	[% IF distro == 'deb' %]
	<p>
	<li>That command may fail on an old machine. Should it fail, run this command instead:</li>
	<li><code>sudo dpkg -i [% installerFile %]</code></li>
	[% END %]
</ul>

[% END %]
